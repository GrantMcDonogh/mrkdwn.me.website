---
import ThemeToggle from "./react/ThemeToggle.tsx";
import MobileNav from "./react/MobileNav.tsx";

const navLinks = [
  { label: "Features", href: "#features" },
  { label: "How It Works", href: "#how-it-works" },
  { label: "Pricing", href: "#pricing" },
];
---

<header
  class="fixed top-0 left-0 right-0 z-40 border-b border-edge backdrop-blur-md"
  style="background-color: rgba(var(--bg-primary-rgb, 30, 30, 30), 0.85);"
  id="site-header"
>
  <div class="mx-auto max-w-6xl px-4 sm:px-6 flex items-center justify-between h-16">
    <!-- Logo -->
    <a href="/" class="flex items-center gap-1 text-body font-bold text-xl">
      mrkdwn<span class="text-accent">.</span>me
    </a>

    <!-- Desktop Nav -->
    <nav class="hidden lg:flex items-center gap-8">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class="text-sm font-medium text-muted hover:text-body transition-colors"
        >
          {link.label}
        </a>
      ))}
    </nav>

    <!-- Right side -->
    <div class="flex items-center gap-2">
      <ThemeToggle client:load />
      <a
        href="https://app.mrkdwn.me"
        class="hidden sm:inline-flex items-center justify-center px-5 py-2 text-sm font-semibold rounded-lg bg-accent text-white hover:bg-accent-hover transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]"
      >
        Get Started
      </a>
      <MobileNav client:load />
    </div>
  </div>
</header>

<!-- Spacer for fixed header -->
<div class="h-16"></div>

<script is:inline>
  // Update header background based on theme
  (function () {
    function updateHeaderBg() {
      const header = document.getElementById("site-header");
      if (!header) return;
      const theme = document.documentElement.getAttribute("data-theme");
      if (theme === "light") {
        header.style.backgroundColor = "rgba(255, 255, 255, 0.85)";
      } else {
        header.style.backgroundColor = "rgba(30, 30, 30, 0.85)";
      }
    }

    updateHeaderBg();

    // Watch for theme changes
    const observer = new MutationObserver(updateHeaderBg);
    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ["data-theme"],
    });
  })();
</script>
